<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>-1</persistent>
  <parentName>manager_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var _tempRooms = level_get_rooms(level_current);
targetRoom  = _tempRooms[0];
CONTINUE    = 0;
EXIT        = 1;
selected    = CONTINUE;
musicDelay = 1; //in steps for alarm
musicFadeTime = 4000; //in MS for music fade in
alarm[0] = musicDelay;

achDelay = 0.5*room_speed;
alarm[1] = achDelay;

initStep = true;

deathMessageType        =   "bad";
deathMessageChance      =   85;//50;  //percent chance of a message appearing at all.
deathMessageGoodChance  =   20; //percent chance of it being an encouraging message.


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with obj_dialog {instance_destroy();}
with obj_cutscene {instance_destroy();}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ach_award("gameover");
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>music_fade_in(song_songofhealing, musicFadeTime, true);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room != level_gameover then exit;

if initStep
{
    var _rand = irandom_range(1,100);
    print(string(_rand) + " / " + string(deathMessageChance));
    
    if _rand &lt;= deathMessageChance
    {
        print("DEATHMESSAGE");
        if irandom_range(1,100) &lt;= deathMessageGoodChance
        {
            deathMessageType = "good";
        }
        
        ShowDeathMessage(deathMessageType);
    }

    initStep = false;
}

var oldSelect = selected;
if inputmanager.up_press {selected--;}
if inputmanager.down_press {selected++;}
selected = clamp(selected, 0, 1);

if oldSelect != selected
{
    audio_play_sound(snd_tick, 0, 0);
}

if inputmanager.menu.accept_press and !instance_exists(obj_dialog)
{
    audio_play_sound(snd_select, 0, 0);
    if selected == CONTINUE
    {
        level_start(level_current);
        instance_destroy();
    }
    else if selected == EXIT
    {
        roomFadeTo(intro);
        instance_destroy();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room != level_gameover then exit;

draw_set_font(font_hud);
draw_set_valign(fa_middle);
draw_set_halign(fa_left); //fa_center

//Game Over Text
var _scale  = 1;
var _str    = "GAME   OVER";
var _w      = string_width(_str);
var _yoff   = -12;
var _xoff   = -(_w/2);
draw_text_transformed_colour(vieww/2+_xoff, viewh/2+_yoff, _str, _scale, _scale, 0,
 c_white, c_white, c_white, c_white, 1);
 
//Continue Text
var _yoff   = 16;
var _xoff   = -(_w/2);
var _scale  = 1;
var _str    = "   CONTINUE";
draw_text_transformed_colour(vieww/2+_xoff, viewh/2+_yoff, _str, _scale, _scale, 0,
 c_white, c_white, c_white, c_white, 1);

//Exit Text
var _yoff   = 32;
var _xoff   = -(_w/2);
var _scale  = 1;
var _str = "   END";
draw_text_transformed_colour(vieww/2+_xoff, viewh/2+_yoff, _str, _scale, _scale, 0,
 c_white, c_white, c_white, c_white, 1);
 
//Selected Heart
var _xoff   = _xoff-8;
var _yoff   = 16;
if selected == EXIT then _yoff = 32;
var _scale  = 1;
draw_sprite_ext(spr_smallheart, 0, vieww/2+_xoff, viewh/2+_yoff, _scale, _scale, 0, c_white, 1);

draw_set_halign(fa_left);
draw_set_valign(fa_top);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
